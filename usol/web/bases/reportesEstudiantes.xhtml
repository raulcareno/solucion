<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/templates/mantenimiento.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core" >
    <ui:define name="title">

    </ui:define>    
    <ui:define name="datos">
        <h:panelGrid width="100%" id="busqueda" >
            <h:form prependId="false" id="form">

                <p:panel id="registro"  style="width: 600px;" header="Reportes de Estudiantes">
                    <!--p:growl id="growl" showDetail="true" sticky="true"  /--> 
                    <!--p:message for="form" /-->
                    <p:messages id="messages" showDetail="false" autoUpdate="true" /> 
                    <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">  
                        <h:outputText value="REPORTE DE: " />  
                        <p:selectOneMenu value="#{reportesBean.tipoReporte}"   style="width:360px" >  
                            <f:selectItem itemLabel="Seleccione..." itemValue="" />  
                            <f:selectItem itemLabel="Ficha de Matricula" itemValue="FM" />  
                            <f:selectItem itemLabel="Ficha de Inscripcion" itemValue="FI" />  
                            <f:selectItem itemLabel="Certificado de MatrÃ­cula" itemValue="CM" />  
                              
                        </p:selectOneMenu> 
                        <h:outputText value="SELECCIONE LA CARRERA: " />  
                        <p:selectOneMenu   id="carrera" label="carrera"  style="width:360px"  value="#{reportesBean.carreraSeleccionado}" effect="fade" converter="ConvCarreras">  
                            <f:selectItems value="#{reportesBean.selectedItemCarreras}" var="obC"  itemValue="#{obC}"/>  
                            <p:ajax event="change" listener="#{reportesBean.buscarMatriculas()}"  update="multiMatriculas" />  
                        </p:selectOneMenu>  

                        <h:outputText value="SELECCIONE LOS ESTUDIANTES: " />  
                        
                        <p:dataTable  style="height: 200px" id="multiMatriculas" var="mat" value="#{reportesBean.mediumMatriculasModel}"   rows="10" >  
                            <p:column style="align:center">  
                                <f:facet name="header">  
                                 <p:selectBooleanCheckbox value="#{reportesBean.todos}" id="todos" itemLabel="TODOS">
                            <p:ajax update="multiMatriculas"  event="change"   listener="#{reportesBean.seleccionarTodos()}" />  
                        </p:selectBooleanCheckbox>  
                                </f:facet>  
                                <p:selectBooleanCheckbox value="#{mat.confirmada}" />  
                             </p:column>
                            
                             <p:column>  
                                <f:facet name="header">  
                                        Estudiantes
                                </f:facet>  
                                <h:outputText value="#{mat.idEstudiantes.apellidoPaterno}  #{mat.idEstudiantes.nombre}" />  
                            </p:column>
 
                        </p:dataTable>  
                        <h:outputText value="." />  

                    </h:panelGrid>  
                    <h:panelGrid columns="3">
                        <p:splitButton style="width: 100px"  value="PDF" ajax="false"  actionListener="#{reportesBean.verReporte('PDF')}"   icon="ui-icon-print">  
                            <p:menuitem value="EXCEL" ajax="false" actionListener="#{reportesBean.verReporte('XLS')}"  icon="ui-icon-print"/>  
                            <p:menuitem value="WORD" ajax="false" actionListener="#{reportesBean.verReporte('DOCX')}"  icon="ui-icon-print"/>  
                        </p:splitButton>                          
                    </h:panelGrid>
                </p:panel>


            </h:form>


        </h:panelGrid>
    </ui:define>
</ui:composition>