<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/templates/mantenimiento.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core" >
    <ui:define name="title">

    </ui:define>    
    <ui:define name="datos">
        <h:panelGrid width="100%" id="busqueda" >
            <h:form prependId="false" id="form"  enctype="multipart/form-data">
                <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript" ></script>
                <p:panel  style="width:100%;">
                    <h:panelGrid  columns="7">
                        <h:outputLabel for="desde" style="font-weight: bold" value="Fecha Desde:" />
                        <p:calendar  pattern="dd/MM/yyyy" showOn="button"  id="desde" value="#{auditoriaBean.desde}" style="font-weight:bold"/>  
                        <h:outputLabel for="hasta" style="font-weight: bold" value="Hasta" />
                        <p:calendar  pattern="dd/MM/yyyy" showOn="button" id="hasta" value="#{auditoriaBean.hasta}" style="font-weight:bold"/>  
                        <h:outputText value="EMPLEADOS:" /> 
                        <p:selectOneMenu id="empleados" label="empleados" converter="ConvEmpleados" value="#{auditoriaBean.empleado}"   effect="fade"  >
                            <f:selectItems value="#{auditoriaBean.selectedItemEmpleados}" var="ob2"  itemValue="#{ob2}"></f:selectItems>
                        </p:selectOneMenu>
                        <p:commandButton id="buscar" value="Buscar" update="auditoria" actionListener="#{auditoriaBean.buscar()}"  icon="ui-icon-search" title="Buscar"/>  
                    </h:panelGrid>
                </p:panel>

                <p:dataTable style="width:100%;" rowsPerPageTemplate="5,10,15,20,25,50,100" paginator="true" rows="25"  id="auditoria" var="obj" value="#{auditoriaBean.model}">  
                    <p:column >  
                         <f:facet name="header">  
                                <h:outputText value="EMPLEADO" />  
                        </f:facet>  
                        <h:outputText value="#{obj.idEmpleados.apellidoPaterno} #{obj.idEmpleados.nombre}" />  
                    </p:column>  
                    <p:column  >  
                        <f:facet name="header">  
                                <h:outputText value="PANTALLA" />  
                        </f:facet>  
                        <h:outputText value="#{obj.tabla}" />  
                    </p:column>  
                    <p:column >  
                        <f:facet name="header">  
                                <h:outputText value="ACCIÃ“N" />  
                        </f:facet>  
                        <h:outputText value="#{obj.accion}" />  
                    </p:column>  
                    
                    <p:column  >  
                         <f:facet name="header">  
                                <h:outputText value="IP" />  
                        </f:facet>  
                        <h:outputText value="#{obj.ip}" />  
                    </p:column>  
                    <p:column >  
                        <f:facet name="header">  
                                <h:outputText value="PC" />  
                        </f:facet>  
                        <h:outputText value="#{obj.pc}" />  
                    </p:column>  
                    <p:column >  
                        <f:facet name="header">  
                                <h:outputText value="FECHA" />  
                        </f:facet>  
                        <h:outputText value="#{obj.fecha}">
                            <f:convertDateTime  pattern="d/M/yyyy hh:mm a" />
                        </h:outputText>  
                    </p:column>  
                    
                    <p:column  >  
                        <f:facet name="header">  
                                <h:outputText value="REGISTROS" />  
                        </f:facet>  
                        <h:outputText value="#{obj.registro}" />  
                    </p:column>  
                    <p:column  >  
                        <f:facet name="header">  
                                <h:outputText value="CODIGOS EDITADOS" />  
                        </f:facet>  
                        <h:outputText value="#{obj.codigosmodificados}" />  
                    </p:column>  

                     

                </p:dataTable>  
                 <h:panelGrid style="border-color: transparent;" columns="4">
                            <h:commandLink>  
                                <p:graphicImage value="/images/excel.png" />  
                                <p:dataExporter type="xls" target="auditoria" fileName="auditoria" />  
                            </h:commandLink>  

                            <h:commandLink>  
                                <p:graphicImage value="/images/csv.png" />  
                                <p:dataExporter type="csv" target="auditoria" fileName="auditoria" />  
                            </h:commandLink>  
                        </h:panelGrid>

            </h:form>


        </h:panelGrid>
    </ui:define>
</ui:composition>