<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/templates/mantenimiento.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="title">

    </ui:define>    
    <ui:define name="datos">
        <h:panelGrid width="100%" id="busqueda" >
            <h:form prependId="false" id="form">
                <script type="text/javascript">
                    function handleDrop(event, ui) {
                        var droppedCar = ui.draggable;
                        droppedCar.fadeOut('fast');
                    }
                </script>
                <style type="text/css">
                    .slot {
                        width:150px;
                        height:150px;
                        display:block;
                        background: lightgrey;
                    }

                    .blueslot {
                        width:100%;
                        height:200px;
                        background: blue;
                        display:block;
                    }
                    .panelito{
                        vertical-align: top;
                        margin: -5px -5px 0px 0px;
                        border:none; 

                        border-color: transparent; 
                        text-align:center;


                    }
                    .panelGrande2{
                        font-size: 10px;
                        vertical-align: top;
                        width: 150px; 
                        text-align:center;
                        margin: 0px 0px 0px 0px;
                    }
                    .panelGrande{
                        font-size: 10px;
                        width: 93px; 
                        text-align:center;
                        margin: 0px 0px 0px 0px;
                        padding: -2px !important;
                        border-width: 1px;
                        border-color: black;
                    }

                    .textos{
                        font-size: 9px;font-weight: bold; margin: -15px -5px -5px -5px; padding: -5px -5px -5px -5px; text-align:center;
                    }
                    .textos2{
                        font-size: 9px;font-weight: bold; margin: -5px; text-align:center;
                    }
                    .textos3{
                        font-size: 12px;font-weight: bold;   text-align:center; float:center;
                        color: red ;
                    }

                </style>
                <script src="locales.js" type="text/javascript"/>  <p:growl id="growl" autoUpdate="true" showDetail="true" sticky="true"  /> 
                    <p:messages id="messages" showDetail="false" autoUpdate="true" /> 
                <p:panel id="registro"  style="width: 100%;" header="Horarios">
                  
                    <h:panelGrid  styleClass="texto"  columns="6">
                        <h:outputText styleClass="textos3" value="SELECCIONE UNA CARRERA.: " /> 
                        <h:selectOneMenu id="carreras"   label="carreras" converter="ConvCarreras" value="#{horariosBean.carreraSeleccionada}" rendered="true">
                            <f:selectItems value="#{horariosBean.selectedItemCarreras}"></f:selectItems>
                            <p:ajax event="change"   listener="#{horariosBean.encerar0()}"   update="carreras aulas nivel selectedCars"/>
                        </h:selectOneMenu>
                        <h:outputText value="NIVEL: " /> 
                        <h:selectOneMenu id="nivel"   label="nivel" converter="ConvNiveles" value="#{horariosBean.nivelesSeleccionada}" rendered="true">
                            <f:selectItems value="#{horariosBean.selectedItemNiveles}"></f:selectItems>
                            <p:ajax event="change"  listener="#{horariosBean.encerar1()}"  update="nivel aulas selectedCars"/>
                        </h:selectOneMenu>
                        <h:outputText value="AULAS: " /> 
                        <h:selectOneMenu id="aulas" label="aulas" converter="ConvAulas" value="#{horariosBean.aulasSeleccionada}" rendered="true">
                            <f:selectItems value="#{horariosBean.selectedItemAulas}"></f:selectItems>
                            <p:ajax event="change"  listener="#{horariosBean.buscarMateriasdeCarrera()}" update=" selectedCars schedule"/>
                        </h:selectOneMenu>
                    </h:panelGrid>

                    <p:dialog  header="AÑADIR OTRO PRE-REQUISITO" id="hola" widgetVar="modalSubirLibreta" modal="true"
                               position="top"  showEffect="explode" 
                               width="440" visible="false" resizable="false">
                        <p:panelGrid columns="2">  
                            <h:outputText value="Docente: " />
                            <h:selectOneMenu   converter="ConvEmpleados" value="#{horariosBean.empleadoSeleccionado}" >  
                                <f:selectItems value="#{horariosBean.selectedItemEmpleados}"  
                                               var="man"   itemLabel="#{man.idEmpleados.apellidoPaterno} #{man.idEmpleados.nombre}"  
                                               itemValue="#{man}" />  
                            </h:selectOneMenu>  
                            <h:outputText value="" />
                            <p:commandButton value="SELECCIONAR Y SALIR"  action="#{horariosBean.anadirAdicional}" oncomplete="modalSubirLibreta.hide();" icon="ui-icon-check" style="margin:0"/>

                        </p:panelGrid>

                        <br />

                    </p:dialog>



                    <p:fieldset id="selectedCars" style="width: 97%; margin-top:20px">  
                        <p:outputPanel id="dropArea"> 
                            <p:schedule id="schedule" maxTime="22" minTime="7" firstHour="7" columnFormat="dddd"
                                        resizable="true" initialDate="#{horariosBean.fechaInicialS}" 
                                        showHeader="false"  value="#{horariosBean.eventModel}"  
                                        locale="es" 
                                        allDaySlot="false"
                                        view="agendaWeek"
                                        widgetVar="myschedule"> 
                                
                                <p:ajax event="dateSelect" listener="#{horariosBean.onDateSelect}" update="eventDetails from" oncomplete="PF('eventDialog001').show()" />  
                                <p:ajax event="eventSelect" listener="#{horariosBean.onEventSelect}" update="eventDetails from" oncomplete="PF('eventDialog001').show()" />  
                                <p:ajax event="eventMove" listener="#{scheduleController.onEventMove}" update="messages" />  
                                <p:ajax event="eventResize" listener="#{scheduleController.onEventResize}" update="messages" />
                            </p:schedule>  
                        </p:outputPanel>  
                        <p:dialog widgetVar="eventDialog001" header="Hora Clase"   showEffect="clip" hideEffect="clip">  
                            <h:panelGrid id="eventDetails" columns="2">  
                                <h:outputText value="MATERIA: " /> 
                                <h:selectOneMenu id="materia" label="materia" converter="ConvCarrerasMaterias" value="#{horariosBean.carreraMateriaSeleccionada}" rendered="true">
                                    <f:selectItems value="#{horariosBean.listaMaterias}"></f:selectItems>
                                </h:selectOneMenu>
                                <h:outputText value="DOCENTE: " />
                                <h:selectOneMenu   converter="ConvEmpleados" value="#{horariosBean.empleadoSeleccionado}" >  
                                    <f:selectItems value="#{horariosBean.selectedItemEmpleados}"  
                                                   var="man"   itemLabel="#{man.idEmpleados.apellidoPaterno} #{man.idEmpleados.nombre}"  
                                                   itemValue="#{man}" />  
                                </h:selectOneMenu>  

                                <h:outputLabel for="from" value="Desde:" />  
                                <p:inputMask id="from" value="#{horariosBean.event.startDate}" mask="99/99/9999 99:99">  
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />  
                                </p:inputMask>  

                                <h:outputLabel for="to" value="Hasta: " />  
                                <p:inputMask id="to" value="#{horariosBean.event.endDate}" mask="99/99/9999  99:99">  
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />  
                                </p:inputMask>  
                                <p:commandButton id="deleteButton" value="Eliminar" actionListener="#{horariosBean.deleteEvent}" oncomplete="PF('myschedule').update();PF('eventDialog001').hide();"/>  
                                <p:commandButton id="addButton" value="Añadir" actionListener="#{horariosBean.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog001').hide();"/>  
                            </h:panelGrid>  
                        </p:dialog> 
                    </p:fieldset>  

                    <h:panelGrid columns="4">

                        <p:commandButton value="imprimir" type="button" icon="ui-icon-print">  
                            <p:printer target="selectedCars" />  
                        </p:commandButton>  
                        <p:commandButton  value="Guardar"  id="guardar"  
                                          action="#{horariosBean.guardar()}"  
                                          icon="guardar" title="Guardar"/>  

                    </h:panelGrid>
                </p:panel>

            </h:form>


        </h:panelGrid>
    </ui:define>
</ui:composition>