<?xml version="1.0" encoding="utf-8"?>
<?page title="Administrador Educativo"?>
<zk style="background-color:#004669;" xmlns="http://www.zkoss.org/2005/zul">
    <style>
        .MyGridRowHeight tr.z-row td.z-row-inner  
        {
        background: white;
        border-top: none;
        border-left: 1px solid white;
        border-right: 1px solid #CCC;
        border-bottom: 1px solid #DDD;
 
        }
        /*.MyGridRowHeight tr.z-grid-odd td.z-row-inner, tr.z-grid-odd{
        background: #F8F8F8;
        } */
        .MyGridRowHeight td.z-row-inner
        {
        padding: 0px 0px 0px 0px ;
        //overflow: hidden;
        }
    
        .estil{
        height:100%;
        background-image: url(./images/fondo.jpg);
        background-repeat: repeat-y;
        background-repeat: repeat-x;
        background-color:#004669;
        }
        .body{
              
        background-color:#004669;
        }
     
    </style>
    <div  class="estil" >
        <window  position="center" style="background-color:#004669;" width="85%" mode="overlapped" id="principales" >
            <zscript>
            <![CDATA[
  import jcinform.persistencia.Global;
  import bean.EventDAO;
  import java.util.ArrayList;
  import jcinform.persistencia.*;
  import jcinform.procesos.Administrador;
  import bean.Permisos;
  import java.io.FileNotFoundException;
  import java.io.FileOutputStream;
    import java.io.DataOutputStream;
    import java.io.FileInputStream;
    import java.io.InputStream;
  import java.io.IOException;
  import java.util.logging.Level;
  import java.util.logging.Logger;
import java.util.Vector;
import bean.matriculasBean;
import sources.CustomDataSource;
import net.sf.jasperreports.engine.JRDataSource;
import sources.*;
import bean.notas;
import java.math.BigDecimal;
import bean.notas;
import jcinform.persistencia.*;
import jcinform.procesos.Administrador;

import java.util.Date;
import org.joda.time.DateMidnight;
import org.zkoss.zul.Listbox;
import miniaturas.*;

    CrearMiniaturas mini = new CrearMiniaturas();

    Administrador adm = new Administrador();
    List allEvents = adm.query("Select o from Estudiantes as o where o.cedula = 0");
    static Estudiantes estudent = new Estudiantes();
    static Representante representante0 = new Representante();
    static Matriculas matricula = new Matriculas();
     Session ses = Sessions.getCurrent();
 
    Periodo periodo = (Periodo) ses.getAttribute("periodo");
    Cursos cursoActual = (Cursos) ses.getAttribute("cursoActualizando");
    System.out.println(""+cursoActual);
    if(periodo == null){
        Executions.sendRedirect("verificarCodigo.zul");
    }
    
 Permisos permiso = new Permisos();

 java.util.Date fecha = new java.util.Date();
 String fechaString = (fecha.getYear()+1900)+"-"+(fecha.getMonth()+1)+"-"+(fecha.getDate());

 
 
 
    Object media = null;
   

        //FUNCIONES
        void cargarFoto(String imageData){
            
            try{
                System.out.println(periodo.getInstitucion().getFotos()+""+imageData);
                    try {
                        java.io.File f = new java.io.File(periodo.getInstitucion().getFotos()+""+imageData);
                        fin = new FileInputStream(f);
                        byte[] buffer = new byte[(int) f.length()];
                        fin.read(buffer);
                        fin.close();
                        foto0.setContent(new org.zkoss.image.AImage("fotito", buffer));
                        System.out.println("foto, cargada...");
                        //foto0.visible = true;
                    } catch (FileNotFoundException ex) {
                        cargarVacio();
                        Logger.getLogger("ERROR EN MATRICULAS: ").log(Level.SEVERE, null, ex);
                    }
                
          }catch(Exception error){
            System.out.println(""+error);
          }
        }
        void cargarVacio(){
          foto0.setContent(new org.zkoss.image.AImage("t", desktop.webApp.getResourceAsStream("/fotos/vacio.gif")));
        }
Integer nuevaMatricula() {
                   Administrador adm = new Administrador();

                    List NoActualMatricula = adm.query("Select o from ParametrosGlobales as o " +
                            "where o.variable = 'MATRICULA' and o.periodo.codigoper = '" + periodo.getCodigoper() + "'");
                    ParametrosGlobales parametros = new ParametrosGlobales();
                    if(NoActualMatricula.size()<=0){
                        alert("Falta copiar los parámetros a este Año Lectivo");
                    }
                    parametros = (ParametrosGlobales) NoActualMatricula.get(0);
                    int noMatri = 0;
                    Double decs = parametros.getNvalor();
                    Long val = java.lang.Math.round(decs);
                    noMatri = Integer.valueOf(val.toString());
                    noMatri += 1;
                    List  numeroYa = adm.query("Select o from Matriculas as o " +
                            "where o.curso.periodo.codigoper = '" + periodo.getCodigoper() + "' " +
                            "and o.numero = '" + noMatri + "'");
                    if (numeroYa.size() > 0) {
                        Integer nClave = adm.geUltimaMatricula("Select max(o.numero) from Matriculas as o " +
                                "where o.curso.periodo.codigoper= '" + periodo.getCodigoper() + "'"  );
                        parametros.setNvalor(new Double(nClave + 1));
                        adm.actualizar(parametros);
                        return nClave + 1;
                    } else {
                        parametros.setNvalor(new Double(noMatri));
                        adm.actualizar(parametros);
                        return noMatri;
                    }
    }

    void generarClave(Boolean boton){
                try{
                String uss = usuario.value;
                if(boton==false){
                    if(uss.trim() != ""){
                            return;
                    }
                }
                    String user ="";
                    String caracter="JCINFORM";
                    caracter+="JCQWERTYUIOPASDFGHJKLZXCVBNM";
                    int numero_caracteres=10;
                    int total=caracter.length();
                    String  clave2="";
                    for(int a=0;a<numero_caracteres;a++){
                        clave2+=caracter.charAt(((Double)(total*Math.random())).intValue());
                    }

                        clave.value = clave2.toUpperCase();
                         caracter=""+apellidos.value.trim().replace(" ","");
                        caracter+="JC"+nombres.value.trim().replace(" ","");
                        numero_caracteres=6;
                        total=caracter.length();
                        user ="";
                        for(int a=0;a<numero_caracteres;a++){
                            user+=caracter.charAt(((Double)(total*Math.random())).intValue());
                        }
                        usuario.value = user.toUpperCase();
                        }catch(Exception e){
                        System.out.println("ERROR EN GENERAR CLAVE"+e);
                        }
    }
 void generarClaveRep(Boolean boton){
                try{
                String uss = usuarior.value;
                if(boton==false){
                    if(uss.trim() != ""){
                            return;
                    }
                }
                    String user ="";
                    String caracter="JCINFORM";
                    caracter+="JCQWERTYUIOPASDFGHJKLZXCVBNM";
                    int numero_caracteres=10;
                    int total=caracter.length();
                    String  clave2="";
                    for(int a=0;a<numero_caracteres;a++){
                        clave2+=caracter.charAt(((Double)(total*Math.random())).intValue());
                    }

                        claver.value = clave2.toUpperCase();
                         caracter=""+apellidosre.value.trim().replace(" ","");
                        caracter+="JC"+nombresre.value.trim().replace(" ","");
                        numero_caracteres=6;
                        total=caracter.length();
                        user ="";
                        for(int a=0;a<numero_caracteres;a++){
                            user+=caracter.charAt(((Double)(total*Math.random())).intValue());
                        }
                        usuarior.value = user.toUpperCase();
                        }catch(Exception e){
                        System.out.println("ERROR EN GENERAR CLAVE"+e);
                        }
    }

void llenar(Estudiantes estudent){

    List cursos = adm.queryNativo("Select o.* from Cursos as o where  '"+fechaString+"' between o.inicial and o.finali and o.periodo = '"+ periodo.getCodigoper() +"' ",Cursos.class);
         if(cursos.size()<=0){
         System.out.println("NO EXISTEN CURSOS HABILITADOS EN ÉSTAS FECHAS.............");
                Executions.sendRedirect("592981728937491234M.zul");
                return;
        }
 
        Cursos se = new Cursos(-1);
        Global g = new Global(); g.setDescripcion("");
        se.setParalelo(g);
        se.setEspecialidad(g);
        se.setDescripcion("[SELECCIONE UN CURSO PARA CONTINUAR]");
        cursos.add(0,se);
            for (Iterator it = cursos.iterator(); it.hasNext();) {
                      Cursos estudent = (Cursos) it.next();
                        Listitem item = new Listitem();
                        item.setValue(estudent);
                        item.appendChild(new Listcell(estudent+""));
                        curso.appendChild(item);
             }

    codigoclave.value = estudent.getCodigo();
    codigo.value = estudent.getCodigoest();
    cedula.value = estudent.getCedula();
    nombres.value = estudent.getNombre();
    apellidos.value = estudent.getApellido();
    direccion.value = estudent.getDireccion();
    telefono.value = estudent.getTelefono();
    masculino.selected  = (estudent.getGenero().equals("Masculino")?true:false);
    femenino.selected  = (estudent.getGenero().equals("Femenino")?true:false);
    nacido.value = estudent.getFechanacimiento();
    mail.value = estudent.getMail();
    usuario.value = estudent.getUsuario();
    nobus.value = estudent.getNobus();
    lugarnacimiento.value = estudent.getLugarnacimiento();
    nacionalidad.value = estudent.getNacionalidad();
    discapacidad.checked = estudent.getDiscapacidad();
    tipodiscapacidad.value = estudent.getTipodiscapacidad();
    hermanos.value = estudent.getHermanos();
    clave.value = permiso.decriptar(estudent.getClave());
    vivecon.value = estudent.getVivecon();
    ingpadre.value = estudent.getIngpadre().intValue();
    ingmadre.value = estudent.getIngmadre().intValue();
    ingotros.value = estudent.getIngotros().intValue();
    
    lugar.value = estudent.getLugar();
          if(estudent.getEstado()!=null){
                estadoe.checked= estudent.getEstado();
            }
            if(estudent.getAdventista()!=null){

                adventista.checked = estudent.getAdventista();
            }
            if(estudent.getTransporte()!=null){
                transporte.checked = estudent.getTransporte();
            }
            if(estudent.getAplico()!=null){
                aplico.checked = estudent.getAplico();
            }


 
        if(estudent.getRepresentante()==null){
            Representante re = new Representante(0);
            re.setTipoidentificacion("C");
            estudent.setRepresentante(re);
        }
        llenarRepresentante(estudent.getRepresentante());

List matricula = adm.query("Select o from Matriculas as o where o.estudiante.codigoest = '"+estudent.getCodigoest()+"' "
+ " and o.curso.periodo.codigoper = '"+periodo.getCodigoper()+"'  ");
    if(matricula.size()>0)
    {
        llenarMatricula(matricula.get(0));
    }else{
        llenarMatricula(new Matriculas(0));
        numero.value = 0;
        //Messagebox.show("No se encuentra Inscrito ni Matriculado...!", "Administrador Educativo", Messagebox.OK, Messagebox.EXCLAMATION);
    }
    
    String valor = ""+estudent.getCodigoest();            
            List retiranList = adm.query("Select o from Retiran as o where o.estudiante.codigoest = '"+valor+"'  and o.tipo = 'R' order by o.codigo ");
            cod11.value = 0; nom11.value =""; par11.value = ""; ci11.value="";
               cod22.value = 0; nom22.value =""; par22.value = ""; ci22.value="";
               cod33.value = 0; nom33.value =""; par33.value = ""; ci33.value="";
            if(retiranList.size()>0){
                int i=0;
                for(Iterator it = retiranList.iterator(); it.hasNext();) {
                      Retiran es = (Retiran)it.next();
                      if(i==0){
                            cod11.value = es.getCodigo(); 
                            nom11.value =es.getApellidos();
                            par11.value =es.getParentesco(); 
                            ci11.value=es.getCedula();
                      }else if(i==1){
                            cod22.value =  es.getCodigo();  
                            nom22.value =es.getApellidos(); 
                            par22.value =es.getParentesco(); 
                            ci22.value=es.getCedula();       
                      }else if(i==2){
                            cod33.value =  es.getCodigo(); 
                            nom33.value =es.getApellidos(); 
                            par33.value = es.getParentesco(); 
                            ci33.value=es.getCedula();       
                      }
                      i++;
                 }
            }else{
               cod11.value = 0; nom11.value =""; par11.value = ""; ci11.value="";
               cod22.value = 0; nom22.value =""; par22.value = ""; ci22.value="";
               cod33.value = 0; nom33.value =""; par33.value = ""; ci33.value="";
             }
             
             List emergenciaList = adm.query("Select o from Retiran as o where o.estudiante.codigoest = '"+valor+"'  and o.tipo = 'E' order by o.codigo ");
             cod1.value = 0; nom1.value =""; par1.value = ""; cel1.value = ""; con1.value="";
                cod2.value = 0;nom2.value =""; par2.value = ""; cel2.value = ""; con2.value="";
                cod3.value = 0;nom3.value =""; par3.value = ""; cel3.value = ""; con3.value="";
            if(emergenciaList.size()>0){
                int i=0;
                for(Iterator it = emergenciaList.iterator(); it.hasNext();) {
                      Retiran es = (Retiran)it.next();
                      if(i==0){
                            cod1.value =es.getCodigo(); 
                            nom1.value =es.getApellidos();
                            par1.value =es.getParentesco(); 
                            cel1.value=es.getTelefono1();
                            con1.value=es.getTelefono2();
                      }else if(i==1){
                            cod2.value =  es.getCodigo();  
                            nom2.value =es.getApellidos(); 
                            par2.value =es.getParentesco(); 
                            cel2.value=es.getTelefono1();
                            con2.value=es.getTelefono2();
                      }else if(i==2){
                            cod3.value =  es.getCodigo(); 
                            nom3.value =es.getApellidos(); 
                            par3.value = es.getParentesco(); 
                            cel3.value=es.getTelefono1();
                            con3.value=es.getTelefono2();
                      }
                      i++;
                 }
            }else{
                 cod1.value = 0; nom1.value =""; par1.value = ""; cel1.value = ""; con1.value="";
                cod2.value = 0;nom2.value =""; par2.value = ""; cel2.value = ""; con2.value="";
                cod3.value = 0;nom3.value =""; par3.value = ""; cel3.value = ""; con3.value="";
             }
             
       List hermanosList = adm.query("Select o from Hermanos as o " + 
       " where o.estudiante.codigoest = '"+valor+"' ");
                            codh1.value = 0; codh2.value = 0; codh3.value = 0; 
                            nomh1.value ="";nomh2.value ="";nomh3.value ="";
                            anioh1.value ="";  anioh2.value =""; anioh3.value =""; 
            if(hermanosList.size()>0){
                int i=0;
                for(Iterator it = hermanosList.iterator(); it.hasNext();) {
                      Hermanos es = (Hermanos)it.next();
                      if(i==0){
                            codh1.value =es.getHermanos().getCodigoest(); 
                            nomh1.value =es.getHermanos().getApellido() +" "+es.getHermanos().getNombre();
                            anioh1.value =es.getCurso(); 
                      }else if(i==1){
                            codh2.value =es.getHermanos().getCodigoest(); 
                            nomh2.value =es.getHermanos().getApellido() +" "+es.getHermanos().getNombre();
                            anioh2.value =es.getCurso(); 
                      }else if(i==2){
                            codh3.value =es.getHermanos().getCodigoest(); 
                            nomh3.value =es.getHermanos().getApellido() +" "+es.getHermanos().getNombre();
                            anioh3.value =es.getCurso(); 
                      }
                      i++;
                 }
            }else{
                            codh1.value = 0; codh2.value = 0; codh3.value = 0; 
                            nomh1.value ="";nomh2.value ="";nomh3.value ="";
                            anioh1.value ="";  anioh2.value =""; anioh3.value =""; 
                             
             }
    
}
void llenarMatricula(Matriculas matri){
         codigomat.value =matri.getCodigomat();
         accion.value = matri.getEstado();
         fechamatricula.value =matri.getFechamat();
         numero.value = matri.getNumero();
         folio.value = matri.getFolio();
         institucion.value = matri.getInstitucion();
            if(matri.getNuevo()!=null){
                nuevo.checked = matri.getNuevo();
            }
            if(matri.getRepite()!=null){
              //  repite.checked = matri.getRepite();
            }
         try{
            beca.value = new BigDecimal(matri.getBeca());
            otros.value = new BigDecimal(matri.getOtros());
         }catch(Exception e){}
         observacion.value = matri.getObservacion();
            if(matri.getCurso() != null){
            int tam = curso.getItems().size();
                    if( tam <= 0 ){
                        System.out.println("hola bola");
                        Executions.sendRedirect("/592981728937491234M.zul");
                        return;
                         
                     }
             


            }
            if(matri.getExtension() != null){
                cargarFoto(matri.getCodigomat()+"."+matri.getExtension());
            }else{
                    cargarVacio();
            }
}

void copiarpr(){
     cedulare.value = cedulapa.value;
     nombresre.value = nombrespa.value ;
     apellidosre.value = apellidospa.value;
     telefonore.value = telefonopa.value;
     direccionre.value = direccionpa.value;
}

void copiarmr(){
     cedulare.value = cedulama.value;
     nombresre.value = nombresma.value ;
     apellidosre.value = apellidosma.value;
     telefonore.value = telefonoma.value;
     direccionre.value = direccionma.value;
}


void copiarp(){
     cedulafac.value = cedulapa.value;
     nombresfac.value = apellidospa.value + " "+ nombrespa.value ;
     telefonofac.value = telefonopa.value;
     direccionfac.value = direccionpa.value;
}

void copiarm(){
     cedulafac.value = cedulama.value;
     nombresfac.value = apellidosma.value + " "+ nombresma.value ;
     telefonofac.value = telefonoma.value;
     direccionfac.value = direccionma.value;
}

void copiarr(){
     cedulafac.value = cedulare.value;
     nombresfac.value = apellidosre.value + " "+ nombresre.value ;
     telefonofac.value = telefonore.value;
     direccionfac.value = direccionre.value;
}

void llenarRepresentante(Representante repren){
    codigore.value = repren.getCodigorep();
    cedulare.value = repren.getIdentificacionrepre();
    nombresre.value = repren.getNombres();
    apellidosre.value = repren.getApellidos();
    direccionre.value = repren.getDireccion();
    telefonore.value = repren.getTelefono();
    emailre.value = repren.getEmail();

     //Listitem item = new Listitem();
     //String tip = repren.getTipoidentificacion();
     //item.setValue(tip);
     //item.appendChild(new Listcell( (tip.equals("C")?"CEDULA":"RUC") +""));
     //tipofac.appendChild(item);
     //tipofac.setSelectedItem(item);
     //llenarConsumidor();
     cedulafac.value = repren.getIdentificacionfactura();
     nombresfac.value = repren.getNombrefactura();
     telefonofac.value = repren.getTelfactura();
     direccionfac.value = repren.getDirfactura();




    cedulapa.value = repren.getIdentificacionpadre();
    nombrespa.value = repren.getNompadre();
    apellidospa.value = repren.getApepadre();
    direccionpa.value = repren.getDirpadre();
    telefonopa.value = repren.getTelpadre();
    emailpa.value = repren.getMailpadre();
    parentesco.value = repren.getParentesco();
    ocupacionpa.value = repren.getOcupacionpadre();
    profesionpa.value = repren.getProfesionpadre();

    cedulama.value = repren.getIdentificacionmadre();
    nombresma.value = repren.getNommadre();
    apellidosma.value = repren.getApemadre();
    direccionma.value = repren.getDirmadre();
    telefonoma.value = repren.getTelmadre();
    emailma.value = repren.getMailmadre();
    ocupacionma.value = repren.getOcupacionmadre();
    profesionma.value = repren.getProfesionmadre();

    usuarior.value = repren.getUsuario();
    claver.value = permiso.decriptar(repren.getClave());


}
void estado(Boolean estado,Boolean modificar){
        if(modificar){
            estudent = (Estudiantes)datos.selectedItem.value;
        }
          padrec.disabled = estado;
   madrec.disabled = estado;
   padrecr.disabled = estado;
   madrecr.disabled = estado;
   subirb.disabled = estado;
   nuevoE.disabled = estado;
   limpiar.disabled = estado;
   representantec.disabled = estado;
   codigo.readonly = estado;
    cedula.readonly = estado;
    nombres.readonly = estado;
    apellidos.readonly = estado;
    direccion.readonly = estado;
    barrio.readonly = estado;
    telefono.readonly = estado;
    genero.readonly = estado;
    religion.readonly = estado;
    mail.readonly = estado;
    nacido.readonly = estado;
    tratamiento.readonly = estado;
    usuario.readonly = estado;
    clave.readonly = estado;
    usuarior.readonly = estado;
    claver.readonly = estado;
    beca.readonly = estado;
    otros.readonly = estado;
    tipo.readonly= estado;
    estadoe.disabled= estado;
    perf.readonly = estado;
    bd.readonly = estado;

    codigomat.readonly = estado;
    //numero.readonly = estado;
    folio.readonly = estado;
    curso.disabled = estado;
    //accion.readonly = estado;
    fechamatricula.readonly = estado;
    fecharetiro.readonly = estado;
    observacion.readonly= estado;
    adventista.disabled= estado;
    nuevo.disabled = estado;
    transporte.disabled = estado;
    asegurado.disabled = estado;
    aseguradora.readonly = estado;
    //repite.disabled = estado;
    nobus.readonly = estado;
    cedulare.readonly = estado;
    nombresre.readonly = estado;
    apellidosre.readonly = estado;
    direccionre.readonly = estado;
    telefonore.readonly = estado;
    emailre.readonly = estado;
    institucion.readonly = estado;

    tipofac.disabled = estado;
    cedulafac.readonly = estado;
    nombresfac.readonly = estado;
    direccionfac.readonly = estado;
    telefonofac.readonly = estado;



   cedulapa.readonly = estado;
    nombrespa.readonly = estado;
    apellidospa.readonly = estado;
    direccionpa.readonly = estado;
    telefonopa.readonly = estado;
    emailpa.readonly = estado;
    parentesco.readonly = estado;
    ocupacionpa.readonly = estado;
    profesionpa.readonly = estado;

   cedulama.readonly = estado;
    nombresma.readonly = estado;
    apellidosma.readonly = estado;
    direccionma.readonly = estado;
    telefonoma.readonly = estado;
    emailma.readonly = estado;
    ocupacionma.readonly = estado;
    profesionma.readonly = estado;
    
    
    cod1.readonly = estado; nom1.readonly = estado; par1.readonly = estado; cel1.readonly = estado; con1.value="";
        cod2.readonly = estado;nom2.readonly = estado; par2.readonly = estado; cel2.readonly = estado; con2.readonly = estado;
        cod3.readonly = estado;nom3.readonly = estado; par3.readonly = estado; cel3.readonly = estado; con3.readonly = estado;

        cod11.readonly = estado; nom11.readonly = estado; par11.readonly = estado; ci11.readonly = estado;
        cod22.readonly = estado; nom22.readonly = estado; par22.readonly = estado; ci22.readonly = estado;
        cod33.readonly = estado; nom33.readonly = estado; par33.readonly = estado; ci33.readonly = estado ;

        codh1.readonly = estado; codh2.readonly = estado; codh3.readonly = estado; 
        nomh1.readonly = estado;nomh2.readonly = estado;nomh3.readonly = estado;
        anioh1.readonly = estado;  anioh2.readonly = estado; anioh3.readonly = estado; 
}
 
void validar(){

        if(curso.selectedItem == null){
            Messagebox.show("SELECCIONE EL CURSO PARA CONTINUAR...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
            curso.focus();
            return;
        }
      Cursos cur = curso.selectedItem.value;
        
        if(cur.getCodigocur().equals(-1)){
            Messagebox.show("SELECCIONE EL CURSO PARA CONTINUAR...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
            return;
        }
        int secAnterior = cursoActual.getSecuencia()+1;
        int secNueva = cur.getSecuencia();
        if(secNueva > secAnterior ){
                  Messagebox.show("EL CURSO EL CUAL HA SELECCIONADO ES MUY SUPERIOR AL QUE LE CORRESPONDE \n " + 
                        " EL SISTEMA REGRESARÁ AL INICIO ", "JCINFORM",  Messagebox.OK, Messagebox.ERROR);
                                Representante repre = ses.getAttribute("userRepresentante");
                                if(repre==null){
                                    Executions.sendRedirect("indexEstudiantes.zul");
                                }else{
                                    Executions.sendRedirect("indexRepresentantes.zul");
                                }
                            return; 
                       
        }
          secAnterior = cursoActual.getSecuencia();
          secNueva = cur.getSecuencia();
         if(secNueva < secAnterior ){
                  Messagebox.show("NO PUEDE ESCOGER UN CURSO INFERIOR AL QUE YA HA APROBADO  \n " + 
                        " EL SISTEMA REGRESARÁ AL INICIO ", "JCINFORM",  Messagebox.OK, Messagebox.ERROR);
                                Representante repre = ses.getAttribute("userRepresentante");
                                if(repre==null){
                                    Executions.sendRedirect("indexEstudiantes.zul");
                                }else{
                                    Executions.sendRedirect("indexRepresentantes.zul");
                                }
                            return; 
                       
        }
        
        if(cur.getSecuencia().equals(cursoActual.getSecuencia())){
                    //AQUI VALIDO SI SE VA A MATRICULAR EN EL MISMO CURSO X SECUENCIA
                    
                        int val = Messagebox.show("EL CURSO QUE ESTÁ SELECCIONANDO ES IGUAL AL DEL AÑO ANTERIOR  \n " + 
                        " ¿DESEA CONTINUAR ACTUALIZANDO SUS DATOS COMO REPROBADO (SI) ? \n "+ 
                        " PARA SALIR PRESIONE (NO)", "JCINFORM",  Messagebox.YES | Messagebox.NO, Messagebox.QUESTION);
                        if(val == 16){
                         
                         }else{
                                Representante repre = ses.getAttribute("userRepresentante");
                                if(repre==null){
                                    Executions.sendRedirect("indexEstudiantes.zul");
                                }else{
                                    Executions.sendRedirect("indexRepresentantes.zul");
                                }
                            return; 
                        } 
        }
}
 void guardar(){
      if(curso.selectedItem == null){
            Messagebox.show("SELECCIONE EL CURSO PARA CONTINUAR...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
            curso.focus();
            return;
        }
      Cursos cur = curso.selectedItem.value;
        
        if(cur.getCodigocur().equals(-1)){
            Messagebox.show("SELECCIONE EL CURSO PARA CONTINUAR...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
            return;
        }
        if(cur.getSecuencia().equals(cursoActual.getSecuencia())){
                    //AQUI VALIDO SI SE VA A MATRICULAR EN EL MISMO CURSO X SECUENCIA
                    
                        int val = Messagebox.show("Está seguro que desea matricularse en el curso seleccionado?", "JCINFORM",  Messagebox.YES | Messagebox.NO, Messagebox.QUESTION);
                        if(val == 16){
                         
                         }else{
                                Representante repre = ses.getAttribute("userRepresentante");
                                if(repre==null){
                                    Executions.sendRedirect("indexEstudiantes.zul");
                                }else{
                                    Executions.sendRedirect("indexRepresentantes.zul");
                                }
                            return; 
                        } 
        }
 
 try{
 if(validarRepresentante()== false)
 {
        btnguardar.disabled=false;
        return;
 }
 
        Messagebox.show("Recuerde que toda la información será verificada y validada en secretaria...!", "Administrador Educativo", Messagebox.OK, Messagebox.EXCLAMATION);
        btnguardar.disabled=true;
        representante0.setCodigorep(codigore.value);
        representante0.setIdentificacionrepre(cedulare.value);
        representante0.setNombres(nombresre.value);
        representante0.setApellidos(apellidosre.value);
        representante0.setDireccion(direccionre.value);
        representante0.setTelefono(telefonore.value);
        representante0.setEmail(emailre.value);

      //  representante0.setTipoidentificacion(tipofac.selectedItem.value);
        representante0.setIdentificacionfactura(cedulafac.value);
        representante0.setNombrefactura(nombresfac.value);
        representante0.setDirfactura(direccionfac.value);
        representante0.setTelfactura(telefonofac.value);

        representante0.setIdentificacionpadre(cedulapa.value);
        representante0.setApepadre(apellidospa.value);
        representante0.setNompadre(nombrespa.value);
        representante0.setTelpadre(telefonopa.value);
        representante0.setDirpadre(direccionpa.value);
        representante0.setMailpadre(emailpa.value);
        representante0.setParentesco(parentesco.value);
        representante0.setProfesionpadre(profesionpa.value);
        representante0.setOcupacionpadre(ocupacionpa.value);

        representante0.setIdentificacionmadre(cedulama.value);
        representante0.setApemadre(apellidosma.value);
        representante0.setNommadre(nombresma.value);
        representante0.setTelmadre(telefonoma.value);
        representante0.setDirmadre(direccionma.value);
        representante0.setMailmadre(emailma.value);
        representante0.setProfesionmadre(profesionma.value);
        representante0.setOcupacionmadre(ocupacionma.value);
        representante0.setUsuario(usuarior.value);
        representante0.setClave(permiso.encriptar(claver.value));
         Boolean repreNuevo = false;
         Boolean estuNuevo = false;

         if((!representante0.getCodigorep().equals(0))){
             adm.actualizar(representante0);
         }else{
            representante0.setCodigorep(adm.getNuevaClave("Representante","codigorep"));
            adm.guardar(representante0);
            repreNuevo = true;
         }


 //GUARDO EL ESTUDIANTE
        estudent.setRepresentante(representante0);
        estudent.setCodigoest(codigo.value);
        estudent.setCedula(""+cedula.value);
        estudent.setNombre(nombres.value);
        estudent.setApellido(apellidos.value);
        estudent.setDireccion(direccion.value);
        estudent.setTelefono(telefono.value);
        estudent.setMail(mail.value);
        estudent.setFechanacimiento(nacido.value);
        estudent.setEstado(true);
        estudent.setAdventista(false);
        estudent.setTransporte(transporte.checked);
        estudent.setAplico(aplico.checked);
        estudent.setNobus(nobus.value);
        estudent.setUsuario(usuario.value);
        estudent.setClave(permiso.encriptar(clave.value));
        estudent.setGenero((masculino.selected == true?"Masculino":"Femenino"));
        estudent.setPendientes(false);
        estudent.setVivecon(vivecon.value);
        estudent.setHermanos(hermanos.value);
        estudent.setLugar(lugar.value);
        estudent.setLugarnacimiento(lugarnacimiento.value);
        estudent.setNacionalidad(nacionalidad.value);
        estudent.setDiscapacidad(discapacidad.checked);
        estudent.setTipodiscapacidad(tipodiscapacidad.value);
        estudent.setIngpadre(new Double(ingpadre.value));
        estudent.setIngmadre(new Double(ingmadre.value));
        estudent.setIngotros(new Double(ingotros.value));
        estudent.setCasa(casa.getSelectedItem().getLabel());
        estudent.setAgua(agua.checked);
        estudent.setLuz(luz.checked);
        estudent.setSshh(sshh.checked);
        estudent.setPozo(pozo.checked);
        estudent.setTelefonob(telefonob.checked);
        estudent.setInternet(internet.checked);
        estudent.setCodigo(codigoclave.value);
        estudent.setMatriculado(true);

        if((!estudent.getCodigoest().equals(0))){
             adm.actualizar(estudent);
   
         }else{
            estudent.setCodigoest(adm.getNuevaClave("Estudiantes","codigoest"));
            adm.guardar(estudent);
            estuNuevo = true;
         }




 //GUARDO HERMANOS
 //BORRAR LOS HERMANOS Y CARGAR NUEVAMENTE
     String sqls = "Delete from Hermanos "+ 
                " where estudiante.codigoest = '"+ estudent.getCodigoest() +"'  ";
                System.out.println(sqls);
                    adm.ejecutaSql(sqls);
        if(!(codh1.value).equals(0)){
                Hermanos her = new Hermanos(adm.getNuevaClave("Hermanos","codigo"));
                her.setHermanos(new Estudiantes(codh1.value));
                her.setCurso(anioh1.value);
                her.setEstudiante(estudent);
                if(nomh1.value!="" && nomh1.value != null){
                    if(nomh1.value.length()>5)
                        adm.guardar(her);
                }
         }
         if(!(codh2.value).equals(0)){
                Hermanos her = new Hermanos(adm.getNuevaClave("Hermanos","codigo"));
                her.setHermanos(new Estudiantes(codh2.value));
                her.setCurso(anioh2.value);
                her.setEstudiante(estudent);
                if(nomh2.value!="" && nomh2.value != null){
                    if(nomh2.value.length()>5)
                        adm.guardar(her);
                }
         }
         if(!(codh3.value).equals(0)){
                Hermanos her = new Hermanos(adm.getNuevaClave("Hermanos","codigo"));
                her.setHermanos(new Estudiantes(codh3.value));
                her.setCurso(anioh3.value);
                her.setEstudiante(estudent);
                if(nomh3.value!="" && nomh3.value != null){
                    if(nomh3.value.length()>5)
                        adm.guardar(her);
                }
         }
                                                     
 
 //GUARDO RETIRAN O EMERGENCIAS
 if(!(cod11.value).equals(0)){
                Retiran ret = new Retiran(cod11.value);
                ret.setApellidos(nom11.value);
                ret.setParentesco(par11.value);
                ret.setCedula(ci11.value);
                ret.setTipo("R");
                ret.setEstudiante(estudent);
                adm.actualizar(ret);
         }else{
                Retiran ret = new Retiran(adm.getNuevaClave("Retiran","codigo"));
                ret.setApellidos(nom11.value);
                ret.setParentesco(par11.value);
                ret.setCedula(ci11.value);
                ret.setTipo("R");
                ret.setEstudiante(estudent);
                adm.guardar(ret);
         }
         
         if(!(cod22.value).equals(0)){
                Retiran ret = new Retiran(cod22.value);
                ret.setApellidos(nom22.value);
                ret.setParentesco(par22.value);
                ret.setCedula(ci22.value);
                ret.setTipo("R");
                ret.setEstudiante(estudent);
                adm.actualizar(ret);
         }else{
                Retiran ret = new Retiran(adm.getNuevaClave("Retiran","codigo"));
                ret.setApellidos(nom22.value);
                ret.setParentesco(par22.value);
                ret.setCedula(ci22.value);
                ret.setTipo("R");
                ret.setEstudiante(estudent);
                adm.guardar(ret);
         }
         
         if(!(cod33.value).equals(0)){
                Retiran ret = new Retiran(cod33.value);
                ret.setApellidos(nom33.value);
                ret.setParentesco(par33.value);
                ret.setCedula(ci33.value);
                ret.setTipo("R");
                ret.setEstudiante(estudent);
                adm.actualizar(ret);
         }else{
                Retiran ret = new Retiran(adm.getNuevaClave("Retiran","codigo"));
                ret.setApellidos(nom33.value);
                ret.setParentesco(par33.value);
                ret.setCedula(ci33.value);
                ret.setTipo("R");
                ret.setEstudiante(estudent);
                adm.guardar(ret);
         }
         
         if(!(cod1.value).equals(0)){
                Retiran ret = new Retiran(cod1.value);
                ret.setApellidos(nom1.value);
                ret.setParentesco(par1.value);
                ret.setTelefono1(cel1.value);
                ret.setTelefono2(con1.value);
                ret.setEstudiante(estudent);
                ret.setTipo("E");
                adm.actualizar(ret);
         }else{
                Retiran ret = new Retiran(adm.getNuevaClave("Retiran","codigo"));
                ret.setApellidos(nom1.value);
                ret.setParentesco(par1.value);
                ret.setTelefono1(cel1.value);
                ret.setTelefono2(con1.value);
                ret.setTipo("E");
                ret.setEstudiante(estudent);
                adm.guardar(ret);
         }
           if(!(cod2.value).equals(0)){
                Retiran ret = new Retiran(cod2.value);
                ret.setApellidos(nom2.value);
                ret.setParentesco(par2.value);
                ret.setTelefono1(cel2.value);
                ret.setTelefono2(con2.value);
                ret.setEstudiante(estudent);
                ret.setTipo("E");
                adm.actualizar(ret);
         }else{
                Retiran ret = new Retiran(adm.getNuevaClave("Retiran","codigo"));
                ret.setApellidos(nom2.value);
                ret.setParentesco(par2.value);
                ret.setTelefono1(cel2.value);
                ret.setTelefono2(con2.value);
                ret.setTipo("E");
                ret.setEstudiante(estudent);
                adm.guardar(ret);
         }
         if(!(cod3.value).equals(0)){
                Retiran ret = new Retiran(cod3.value);
                ret.setApellidos(nom3.value);
                ret.setParentesco(par3.value);
                ret.setTelefono1(cel3.value);
                ret.setTelefono2(con3.value);
                ret.setTipo("E");
                ret.setEstudiante(estudent);
                adm.actualizar(ret);
         }else{
                Retiran ret = new Retiran(adm.getNuevaClave("Retiran","codigo"));
                ret.setApellidos(nom3.value);
                ret.setParentesco(par3.value);
                ret.setTelefono1(cel3.value);
                ret.setTelefono2(con3.value);
                ret.setTipo("E");
                ret.setEstudiante(estudent);
                adm.guardar(ret);
         }
          







//GUARDAR MATRICULA
        matricula.setCodigomat(codigomat.value);
        matricula.setEstudiante(estudent);
        matricula.setObservacion("Matricula por Internet "+ new Date().toLocaleString());
       
        matricula.setFechamat(new Date());   
        matricula.setCurso(curso.selectedItem.value);
        
        matricula.setNumero(numero.value);
        matricula.setEstado("Matriculado"); 
        matricula.setNuevo(nuevo.checked);  
        matricula.setRepite(new Integer(repite.selectedItem.value));  
        matricula.setInstitucion(institucion.value);  

        try{
            matricula.setBeca(0.0);
            matricula.setOtros(0.0);
        }catch(Exception ea){}

         if(matricula.getEstado().equals("Inscrito")){
            matricula.setNumero(0);
         }

            org.zkoss.image.Image nueva = foto0.getContent();
            matricula.setFolio(folio.value);



        if((!matricula.getCodigomat().equals(0)) ){

                if(matricula.getNumero().equals(0)){
                    matricula.setNumero(nuevaMatricula());
                }
                
                    if(!nueva.getName().equals("vacio")){
                        InputStream objin=nueva.getStreamData();
                        String  name =  periodo.getInstitucion().getFotos()+matricula.getCodigomat()+"."+nueva.getFormat();
                        FileOutputStream out=new FileOutputStream(name);
                        DataOutputStream objout=new DataOutputStream(out);
                        org.zkoss.io.Files.copy(objout,objin);
                        mini.reducir(periodo.getInstitucion().getFotos(),matricula.getCodigomat()+"",nueva.getFormat()+"");
                        matricula.setExtension(nueva.getFormat());
                    }else{
                        matricula.setExtension(null);
                    }
                
                adm.actualizar(matricula);

         }else{

                if(matricula.getEstado().equals("Matriculado")){
                    if(matricula.getNumero().equals(0)){
                        matricula.setNumero(nuevaMatricula());
                        numero.value = matricula.getNumero();
                    }
                    if(folio.value == "" || folio.value == null ){
                        matricula.setFolio(matricula.getNumero());
                        folio.value = matricula.getNumero();
                    }

                }else{
                    matricula.setNumero(0);
                }
                 Integer matri = adm.getNuevaClave("Matriculas","codigomat");
                matricula.setCodigomat(matri);
             if(!nueva.getName().equals("vacio")){
                    
                   String  name =  periodo.getInstitucion().getFotos()+matricula.getCodigomat()+"."+nueva.getFormat();
                   
                    InputStream objin=nueva.getStreamData();
                    FileOutputStream out=new FileOutputStream(name);
                    DataOutputStream objout=new DataOutputStream(out);
                    org.zkoss.io.Files.copy(objout,objin);
                    matricula.setExtension(nueva.getFormat());
             }else{
                matricula.setExtension(null);
             }
             adm.guardar(matricula);
             codigomat.value = matri;
         }

            Messagebox.show("Registro Almacenado con Éxito...!", "Administrador Educativo", Messagebox.OK, Messagebox.INFORMATION);
            btnguardar.disabled=true;
            ses.setAttribute("userEstudiante",estudent);
            showReport("AM",""+codigomat.value);
       }catch(Exception e){
                alert("Error:"+e);
                System.out.println("1. "+e.getCause()); 
                System.out.println("2. "+e.getLocalizedMessage());                
                System.out.println("3. "+e.getMessage());
                System.out.println("4. "+e.getStackTrace()); 
                System.out.println("5. "+e.getCause());
                System.out.println("6. "+e);
                Logger.getLogger("matriculas2d2").log(Level.SEVERE, null, e);
        }

    }

   Boolean verificar(String accion){
        return permiso.verificarPermiso("Matricular",accion);

    }
 
 void move(){
        llenar((Estudiantes)datos.selectedItem.value);
        modificar.disabled = false;
        acta.disabled = false;
        certificado.disabled = false;
        certificado2.disabled = false;
        claveprint.disabled = false;
        combo.value="";
          registro.setSelected(true);
  }
void modificar(){
  if(verificar("Modificar")){
       guardar.disabled=false;
        estado(false,false);
    }else{
            Messagebox.show("No tiene permisos para realizar esta acción...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
    }
}
void eliminar(){
  if(verificar("Eliminar")){
        try{
             estudent = (Estudiantes)datos.selectedItem.value;
             adm.eliminarObjeto(Estudiantes.class, estudent.getCodigoest());
            datos.removeItemAt(datos.getSelectedIndex());
            llenar(new Estudiantes(0));
            combo.value="";
                Messagebox.show("Registro Eliminado con Éxito...!", "Administrador Educativo", Messagebox.OK, Messagebox.INFORMATION);
        }catch(Exception e){
            Messagebox.show("No se pudo eliminar el Registro...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
        }
}else{
            Messagebox.show("No tiene permisos para realizar esta acción...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
    }
}
void buscarEstudiante(String valor){
  
    }
void buscarRepresentante(String valor){

int ini = valor.indexOf("[");
int fin = valor.indexOf("]");
valor = valor.substring(ini+1, fin);
            List empleados = adm.query("Select o from Representante as o where o.codigorep = '"+valor+"' ");
            if(empleados.size()>0){
                Representante object = null;
                for(Iterator it = empleados.iterator(); it.hasNext();) {
                 object = (Representante)it.next();
                      //estudent = object;
                 }
            llenarRepresentante(object);
            modificar.disabled=false;
            }else{
                estudent = new Representante(0);
            }

    }
 
  void verificarCedula(String valor){
      if(valor.length()>9){
            List empleados = adm.query("Select o from Estudiantes as o where o.cedula = '"+valor+"' ");
            if(empleados.size()>0){
                Messagebox.show("Número de Identificación ya registrado...!", "Administrador Educativo", Messagebox.OK, Messagebox.EXCLAMATION);

                for(Iterator it = empleados.iterator(); it.hasNext();) {
                      Estudiantes object = (Estudiantes)it.next();
                        estudent = object;
                 }
            llenar(estudent);

            }else{
                estudent = new Estudiantes(0);
            }

        }
    }


  void buscar(String p){
        List empleadosEncontrados = adm.query("Select o.estudiante from Matriculas as o " +
        " where o.estudiante.apellido like '%"+p+"%' and o.curso.periodo.codigoper = '"+periodo.getCodigoper()+"'   order by o.estudiante.apellido");
        datos = new Listbox();
        int a=0;
            for (Iterator it = datos.getItems().iterator(); it.hasNext();) {
                    datos.getItems().remove(a);
                }
               for (Iterator it = empleadosEncontrados.iterator(); it.hasNext();) {
                      Estudiantes acceIt = (Estudiantes) it.next();
                      Listitem li = new Listitem();
                      li.setValue(acceIt);
                      li.appendChild(new Listcell(acceIt.getCedula()+""));
                      li.appendChild(new Listcell(acceIt.getApellido()+" "+acceIt.getNombre()));
                      li.appendChild(new Listcell(acceIt.getDireccion()+""));
                      datos.appendChild(li);
             }

    }
void cargar(Global g){
    estudent.setPerfil(g);
}

void llenarConsumidor(){


    cedulafac.value = "";
    nombresfac.value = "";
    direccionfac.value = "";
    telefonofac.value = "";



}



//PARA REPORTES
public JRDataSource certificados(Matriculas matricula,String tipo){
      Administrador adm = new Administrador();
      Session ses = Sessions.getCurrent();
        Periodo periodo = (Periodo) ses.getAttribute("periodo");
        ArrayList detalle = new ArrayList();
        String query = "SELECT mat FROM Matriculas AS mat " +
                "WHERE  mat.estado like '%Matriculado%' " +
                "and mat.codigomat = '" + matricula.getCodigomat() + "' ";
        List hoy = adm.query(query);
        for (Iterator it = hoy.iterator(); it.hasNext();) {
            Matriculas elem = (Matriculas) it.next();
            detalle.add(elem);
        }
        JRDataSource ds = null;
        if(tipo.equals("CM")){
             ds = new ReporteCertificadoDataSource(detalle);
        }else{
              ds = new ReporteActaDataSource(detalle);
        }
        return ds;

}
        void showReport(String tipo,String cod) {
             
            Executions.sendRedirect("/592981728937491235M.zul?AASL2KSO348934934="+cod+"&TP=pdf");
            //Preparing parameters
            
             
            Institucion insts = periodo.getInstitucion();

            Map parametros = new HashMap();
            parametros.put("denominacion", insts.getDenominacion());
            parametros.put("nombre", insts.getNombre());
            parametros.put("periodo", periodo.getDescripcion());
            parametros.put("slogan", insts.getSlogan());
            parametros.put("secretaria", insts.getSecretaria());
            parametros.put("rectora", insts.getRector());
            JRDataSource datasource = null;
            String directorioReportes = insts.getReportes();
                    datasource = certificados(new Matriculas(codigomat.value),tipo);
                    parametros.put("titulo", "Comprobante de Matricula");
                    report.setSrc(directorioReportes + "actaMatricula.jasper");
 
            if(!tipo.equals("-1")){
                report.setParameters(parametros);
                report.setDatasource(datasource);
                report.setType("html");
                 
            }
        }


validarEstudiante(){
    if(lugarnacimiento.value == "" || nacionalidad.value  == "" || nombres.value == "" || apellidos.value == "" || direccion.value == "" || usuario.value == "" || clave.value == ""){
        Messagebox.show("Registre todos los campos del ESTUDIANTE que están con (*) ...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
        destudiante.visible = true;
        dmatricula.visible = false;
    }
}

validarMatricula(){
        try{
               Cursos cur = curso.selectedItem.value;
               if(cur.getCodigocur().equals(-1)){
                    Messagebox.show("SELECCIONE el curso de la MATRICULA que está con (*) ...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
                    dmatricula.visible = true;
                    dpadre.visible = false;
                    return;
               }
        }catch(Exception a){
            System.out.println(a);
           Messagebox.show("Registre o Seleccione todos los campos de la MATRICULA que están con (*) ...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
           dmatricula.visible = true;
           dpadre.visible = false;
           return;
        }
    if(vivecon.value == "" || hermanos.value == null ){
        Messagebox.show("Registre todos los campos de la MATRICULA que están con (*) ...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
        dmatricula.visible = true;
        dpadre.visible = false;
    }
}

boolean validarRepresentante(){


    if(nombresre.value == ""||  apellidosre.value == "" ||  direccionre.value == "" || telefonore.value == "" || emailre.value == "" || parentesco.value == "" || usuarior.value == "" || claver.value == ""){
        Messagebox.show("Registre todos los campos del REPRESENTANTE que están con (*) ...!", "Administrador Educativo", Messagebox.OK, Messagebox.ERROR);
        return false;
    }
    return true;
}
  ]]>
            </zscript>
      
            <groupbox  style="background-color:yellow" id="gb" mold="3d" >
                <vbox> 
 
                    <div>
                        <label value="VIENE DE:" style="font-weight:bold;color:blue;font-size:14px"/>
                        <textbox  width="460px" readonly="true" id="cursoactual" visible="true" />
                        
                        </div>
                        <div>
                        <span> 
                            <label value="PASA A:" style="font-weight:bold;color:blue;font-size:14px"/>
                            <span style="color:blue"> (*)</span>:
                        </span>

                        <span>

                            <listbox onSelect="validar()" id="curso" width="460px" mold="select" >
                                <listitem selected="true" forEach="${cursos}" value="${each}">
                                    <listcell label="${each.descripcion} ${each.especialidad}  ${each.paralelo}" />
                                </listitem>
                            </listbox>
                            <image src="/images/selec.png"  height="30px"/>

                        </span>
                    </div>
                </vbox>
                
	    		  
                                
                   
            </groupbox>
            <portallayout>
                <portalchildren style="padding: 5px" width="50%">
                  
                    <panel   title="DATOS DEL ESTUDIANTE"  framable="true"   border="normal" collapsible="true" >
                        <panelchildren>
                            <grid sclass="MyGridRowHeight" width="600px"   height="100%">
                                <rows>
                                    <row>

                                        <span style="float:right"> Codigo :</span>
                                        <span>
                                            <intbox  maxlength="14" cols="5"  disabled="true"  readonly="false" id="codigo"  />
                                            Identificación:
                                            <textbox maxlength="10" cols="13" onChange="verificarCedula(self.value)" readonly="false" id="cedula"  />
                                                                        
                                        </span>
                                    </row>
                                    <row>

                                        <span style="float:right;">
                                            <label value="Nombres(*)" style="font-weight: bold;"/>
                                        </span>
                                        <textbox id="nombres"  maxlength="60" cols="40" readonly="true"   />
                                    </row>

                                    <row>

                                        <span style="float:right;">
                                            <label value="Apellidos(*)" style="font-weight: bold;"/>
                                        </span>
                                        <textbox id="apellidos" onBlur="generarClave(false);"  maxlength="60" cols="40" readonly="true"  />
                                    </row>
                                    <row>

                                        <span style="float:right;">
                                            <label value="Dirección(*)" style="font-weight: bold;"/>
                                        </span>
                                        <span>
                                            <textbox id="direccion" maxlength="100" cols="40"  readonly="false"    />
    
                                        </span>
                                    </row>                                        
                                    <row>
  
                                        <span style="float:right"> Barrio:</span>
                                        <textbox id="barrio" maxlength="100" cols="15"  readonly="false"    />
   
                                    </row>
                                        

                                    <row>
                                        <span style="float:right"> Email:</span>
                                        <span>
                                            <textbox id="mail" maxlength="100" cols="40"  readonly="false"    />
                                            Teléfono:
                                            <textbox id="telefono" maxlength="50" cols="15"  readonly="false"  />
                                        </span>
                                    </row>

                                </rows>
                            </grid>

                            <grid>
                                <rows>
                                    <row>
                                        <span>
                                            <grid width="200px" height="100%" sclass="MyGridRowHeight" >
                                                <rows>
                                                    <row>
                                                        <span  style="border:1px">
                                                            <button id="subirb"   image="/images/subir.png" label="Subir Fotografía">
                                                                <attribute name="onClick">{
                                                                    Object media = Fileupload.get("Seleccione una Fotografía de su Ordenador: ","JCINFORM, SUBIR IMAGEN");

                                                                    if (media instanceof org.zkoss.image.Image) {
                                                                    foto0.setContent(media);
                                                                    foto0.visible = true;    

                                                                    } else if (media != null)
                                                                    Messagebox.show("Seleccione una Imagen: "+media, "Error", Messagebox.OK, Messagebox.ERROR);
                                                                    media = null;
                                                                    }
                                                                </attribute>
                                                            </button>
                                                            <image  src="/images/information.png" height="18px" width="18px"  tooltip="cedulat" popup="cedulat" style="cursor: pointer" />
                                                         
                                                            <popup id="cedulat" width="300px">
                                                                <html>
                                                                    AYUDA  &lt;p&gt;
                                                                    1.- Presione el Botón Subir Foto  &lt;p&gt;
                                                                    2.- Presione Seleccionar Archivo, Una vez localizada la fotografía,presiona Abrir &lt;p&gt;
                                                                    3.- Para finalizar presionar (Cargar Archivo Upload)
                                                                </html>
                                                            </popup>
                                                        </span>
                                                    </row>
                                                    <row>
                                                        <span style="border:1px">
                                                            <image border="1" height="117px"  id="foto0"/>
                                                                    <!--vbox width="50px" height="125px" style="border:1px" id="miimagen"/-->
                                                        </span>
                                                    </row>
                                                </rows>
                                            </grid>
                                        </span>
                                        <span>
                                            <grid  sclass="MyGridRowHeight" width="100%" height="100%">
                                                <rows>
                                                    <row>
                                                        <span style="float:right;">
                                                            <label value="Género(*)" style="font-weight: bold;"/>
                                                        </span>
                                                        <radiogroup Id="genero" >
                                                            <radio id="masculino"  label="Masculino"/>
                                                            <radio id = "femenino"  selected="true" label="Femenino"/>
                                                        </radiogroup>
                                                    </row>
                                                    <row>
                                                        <span style="float:right"> Fecha Nacimiento:</span>
                                                        <datebox id="nacido"  readonly="false"  />

                                                    </row>
                                                    <row>
                                                        <span style="float:right"> Usuario:</span>
  
                                                        <textbox id="usuario" maxlength="30" cols="12" readonly="false"  />
 


                                                    </row>
                                                    <row>
                                                        <span style="float:right"> Clave:</span>
                                                        <span>
                                                            <textbox id="clave"   maxlength="30" cols="15" readonly="false"  />
                                                            <checkbox visible="false" id="estadoe"   />
                                                        </span>
                                                    </row>
                                                    <row>

                                                        <span style="float:right"> Es Interno?:</span>
                                                        <span>
                                                            <checkbox id="adventista"  /> Es Nuevo?:
                                                            <checkbox id="nuevo" />
                                                        </span>

                                                    </row>
                                                    <row>
                                                        <span style="float:right"> Religión:</span>
                                                        <combobox id="religion" readonly="false">
                                                            <comboitem  value="Ninguno" label="Ninguno"/>
                                                            <comboitem value="Adventista" label="Adventista"/>
                                                            <comboitem value="Cristiano" label="Cristiano"/>
                                                            <comboitem value="Evangélico" label="Evangélico"/>
                                                            <comboitem value="Católico" label="Catolico"/>
                                                            <comboitem value="Otra" label="Otra"/>


                                                        </combobox>
                                                    </row>
                                                </rows>
                                            </grid>
                                        </span>
                                    </row>
                                </rows>
                            </grid>
                                    
                        </panelchildren>
                    </panel>
                    <panel collapsible="true"   framable="true"  border="normal"  title="DATOS DE MATRICULACIÓN" >
                        <panelchildren>
                            <grid sclass="MyGridRowHeight" width="100%"  height="100%">
                                <rows>
                                    <row visible="false">
                                        <span style="float:right">
                                                                                
                                            <label value="No.Matri.(*)" style="font-weight: bold;"/>
                                        </span>
                                        <span>
                                                                                
                                            <intbox maxlength="10"   cols="5"  id="numero"  />
                                            <span >
                                                <label value="No.Folio(*)" style="font-weight: bold;"/>
                                            </span>
                                            <intbox maxlength="10" readonly="false" cols="5"  id="folio"  />
                                            <intbox maxlength="14" cols="5"  visible="true"  style="font-size:8px;background:transparent;border:0px"  readonly="false" id="codigomat"  />
                                                                                  
                                                
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right">
                                                                                
                                            <label value="Repite el Año: " style="font-weight: bold;"/>
                                        </span>
                                        <span>
                                            <radiogroup Id="repite" >
                                                <radio selected="true"  value="0" label="1ra."/>
                                                <radio value="1"  label="2da."/>
                                                <radio value="2"  label="3ra."/>
                                                <radio value="3"  label="4ta."/>
                                            </radiogroup>
                                            Matricula
                                        </span>
                                    </row>
                                    <row visible="false">
                                        <span style="float:right;">
                                            <label value="Estado(*)" style="font-weight: bold;"/>
                                        </span>
                                        <span>
                                            <combobox readonly="false"   id="accion"  >
                                                <comboitem  value="Matriculado" label="Matriculado"/>
                                                <comboitem value="Inscrito" label="Inscrito"/>
                                                <comboitem value="Retirado" label="Retirado"/>
                                                <comboitem value="Emitir Pase" label="Emitir Pase"/>
                                                <comboitem value="Recibir Pase" label="Recibir Pase"/>
                                                <comboitem value="Anulado" label="Anulado"/>
                                            </combobox>
                                            Inst. Anterior:
                                            <textbox id="institucion" readonly="false"  maxlength="30" cols="20"/>
                                        </span>

                                    </row>
                                    <row visible="false">
                                        <span style="float:right;">
                                            <label value="Fec.Matricula(*)" style="font-weight: bold;"/>
                                        </span>
                                        <span>
                                            <datebox id="fechamatricula"  readonly="false"  />
                                            <label value="Fec.Retiro(*)" style="font-weight: bold;"/>
                                            <datebox id="fecharetiro"  readonly="false"  />
                                          
                                                                             
                                        </span>
                                                                
                                    </row>
                                    <row>
                                        <span style="float:right">Toma Transporte:</span>

                                        <span>
                                            <checkbox id="transporte"  />
                                            <textbox id="nobus" maxlength="100" cols="40" readonly="false"  />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> %Beca:</span>
                                        <span>
                                            <decimalbox id="beca" format="###.##"   maxlength="5" cols="10" readonly="false"  />

                                            Otros Dsctos:
                                            <decimalbox id="otros" format="###.##"   maxlength="5" cols="10" readonly="false"  /> USD
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> ¿Asegurado?:</span>
                                        <span>
                                            <checkbox id="asegurado"  />

                                            Nombre Aseguradora:
                                            <textbox id="aseguradora"  maxlength="50" cols="20" readonly="false"  /> 
                                        </span>
                                    </row>
                                    <row visible="false">
                                        <span style="float:right"> Observación:</span>
                                        <textbox rows="2" id="observacion" cols="30"  readonly="false"  />
                                    </row>
                                    <row>
                                        <span style="float:right">
                                            Provincia: 
                                        </span>
                                        <span>
                                            <textbox cols="20" id="provincia"  />
                                            Canton:
                                            <textbox cols="20"  id="canton"  />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right">
                                            Parroquia:    
                                        </span> 
                                        
                                        <span>
                                            <textbox  cols="20" id="lugarnacimiento"  />
                                            <span style="color:blue;weight:bold">    
                                                Nac.(*)
                                            </span>
                                            <textbox id="nacionalidad"  />
                                        </span>
                                        
                                         
                                    </row>
                                          
                                </rows>
                            </grid>

                        </panelchildren>
                    </panel>
                        
                    <panel style="margin-bottom:10px" title="DATOS VARIOS" border="normal">
                        <panelchildren>          
                            <grid sclass="MyGridRowHeight">
                                <rows>
                                    <row visible="false">
                                        <span  style="float:right">
                                            YA SE MATRICULÓ:
                                        </span>
                                        <span>
                                            <checkbox id="matriculado"/>
                                            CODIGO DE MATRICULACIÓN:
                                            <textbox id="codigoclave"  />
                                            BLOQUEADO
                                            <checkbox id="pendientes"/>
                                            <checkbox visible = "false"  id="aplico"/>
                                            <checkbox visible = "false"  id="perdio"/>
                                            <checkbox visible = "false"  id="suspenso"/>
                                        </span>
                                    </row>
                                    <row >
                                        <span style="float:right">Lugar Ocupa  (*) :
                                        </span>
                                        <span>
                                            <spinner value="1" cols="2" id="lugar"  constraint="no negative,no zero,min 0 max 20" />
                                            Con quién vive (*):
                                        
                                            <combobox value="Padres"  id="vivecon" >
                                                <comboitem label="Padres"/>
                                                <comboitem label="Solo Madre"/>
                                                <comboitem label="Solo Padre"/>
                                                <comboitem label="Abuelos"/>
                                                <comboitem label="Tíos"/>
                                                <comboitem label="Encargado a Otros"/>
                                            </combobox>
                                        </span>
                                    </row>
                                    <row >
                                        <span style="float:right">Est.Civil Padres:
                                        </span>
                                        <span>
                                            <radiogroup Id="estadocivil" >
                                                <radio selected="true" label="Casados"/>
                                                <radio label="Divorciados"/>
                                                <radio label="Madre Soltera"/>
                                                <radio label="Viudo(a)"/>
                                                <radio label="Separados"/>
                                                <radio label="U.Libre"/>                                                            
                                            </radiogroup>
                                        </span>
                                    </row>
                                    <row>
 
                                        <span style="float:right">Ingresos:</span>
                                        <span>
                                            Padre:
                                            <intbox id="ingpadre" cols="10"  />
                                            Madre:
                                            <intbox id="ingmadre" cols="10"   />
                                            Otros:
                                            <intbox id="ingotros" cols="10"   />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right">Tipo Vivienda
                                            <span style="color:blue"> (*)</span>:
                                        </span>
                                        <span>
                                            <radiogroup Id="casa" >
                                                <radio selected="true" label="Propia"/>
                                                <radio label="Arrend."/>
                                                <radio label="Prestada"/>
                                                <radio label="Anticresis"/>
                                                <radio visible="false" label="Prestamo"/>
                                                <radio label="Dpto."/>
                                                <radio label="Otros"/>
                                            </radiogroup>
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right">Servicios
                                            <span style="color:blue"> (*)</span>:
                                        </span>
                                        <span>

                                            <checkbox id="luz" label="Luz Electrica"/>
                                            <checkbox id="agua"  label="Agua"/>
                                            <checkbox id="sshh"  label="SS.HH."/>
                                            <checkbox visible="false" id="pozo"  label="Pozo Séptico"/>
                                            <checkbox id="telefonob"  label="Teléfono"/>
                                            <checkbox id="internet"  label="Internet"/>
                                        </span>

                                    </row>
                              
                                    <row>

                                        <span style="float:right;font-size:11px">
                                            <label  style="font-size:11px" value="¿Posee Discapacidad?" id="t16"/>
                                        </span>
                                        <span>

                                            <checkbox id="discapacidad" label="SI" onCheck="tipodiscapacidad.readonly = self.checked? false: true" />
                                            <label style="font-size:11px"  value="Describa su Discapacidad" id="t160"/>
                                            <textbox    id="tipodiscapacidad" maxlength="100" cols="30" rows="1"  readonly="false"  />

                                        </span>
                                    </row>
                                </rows>
                            </grid>
                        </panelchildren>
                                        
                    </panel>
                                   
                    <panel style="margin-bottom:10px" title="EN CASO DE EMERGENCIA LLAMAR A: " border="normal">
                        <panelchildren>            
                            <grid   sclass="MyGridRowHeight" width="100%" id="opciones">
                                <columns sizable="true">
                                    <column visible="false" label="codigo" />
                                    <column style="font-weight:bold" label="NOMBRES" width="120px" />
                                    <column label="PARENTESCO" width="50px"  />
                                    <column label="CELULAR"  width="30px" />
                                    <column label="CONVENCIONAL" width="30px"  />
                                </columns>
                                <rows>
                                    <row>
                                        <intbox id="cod1" value="0"/>
                                        <textbox readonly="false"  id="nom1" cols="30" value=""/>
                                        <textbox readonly="false"  id="par1" value=""/>
                                        <textbox readonly="false"  id="cel1" cols="10"  value=""/>
                                        <textbox readonly="false"  id="con1" cols="10"  value=""/>
                                    </row>
                                    <row>
                                        <intbox id="cod2" value="0"/>
                                        <textbox readonly="false" id="nom2" cols="30"  value=""/>
                                        <textbox readonly="false"  id="par2"    value=""/>
                                        <textbox readonly="false"  id="cel2" cols="10"   value=""/>
                                        <textbox readonly="false"  id="con2" cols="10"   value=""/>
                                    </row>
                                    <row>
                                        <intbox id="cod3" value="0"/>
                                        <textbox readonly="false"  id="nom3" cols="30"  value=""/>
                                        <textbox readonly="false"  id="par3"  value=""/>
                                        <textbox readonly="false"  id="cel3" cols="10"   value=""/>
                                        <textbox readonly="false"  id="con3" cols="10"   value=""/>
                                    </row>
                                            
                                </rows>
                            </grid>
                        </panelchildren>
                    </panel>  
                                        
                                        
                    <panel style="margin-bottom:10px" title="PERSONAS AUTORIZADAS A RETIRAR AL ESTUDIANTE: " border="normal">
                        <panelchildren>
                            <grid  width="100%" id="opciones2">
                                                 
                                <columns sizable="true">
                                    <column label="codigo" visible="false"/>
                                    <column label="NOMBRES" width="120px" />
                                    <column label="PARENTESCO" width="50px"  />
                                    <column label="C.I."  width="30px" />
  
                                </columns>
                                <rows id="filas2">
                                    <row>
                                        <intbox id="cod11" value="0"/>
                                        <textbox readonly="false"  id="nom11" cols="30" value=""/>
                                        <textbox readonly="false"  id="par11" value=""/>
                                        <textbox readonly="false"  id="ci11" cols="10" value=""/>
                                    </row>
                                    <row>
                                        <intbox id="cod22" value="0"/>
                                        <textbox readonly="false"  id="nom22" cols="30"  value=""/>
                                        <textbox readonly="false"  id="par22"  value=""/>
                                        <textbox readonly="false"  id="ci22" cols="10" value=""/>
                                    </row>
                                    <row>
                                        <intbox id="cod33" value="0"/>
                                        <textbox readonly="false"  id="nom33" cols="30"  value=""/>
                                        <textbox  readonly="false" id="par33"  value=""/>
                                        <textbox  readonly="false" id="ci33" cols="10"  value=""/>
                                    </row>
                                            
                                </rows>
                            </grid>
                        </panelchildren>
                    </panel>
                                     
                    
                     
                </portalchildren>    
                <portalchildren style="padding: 5px" width="50%">
                     

                    <panel collapsible="true"   
                           framable="true"  title="DATOS DEL PADRE"
                           border="normal" >
                        <panelchildren>
                            <grid sclass="MyGridRowHeight">
                                <rows>
                                        
                                    <row>
                                        <span style="float:right"> Identificación:</span>
                                        <textbox maxlength="10" cols="13"  readonly="false" id="cedulapa"  />
                                    </row>
                                    <row>
                                        <span style="float:right"> Nombres:</span>
                                        <span>
                                            <textbox id="nombrespa"  maxlength="60" cols="20" readonly="false"   />
                                            <intbox maxlength="14" cols="5"  readonly = "true"   visible="false"  id="codigore"  />
                                        
                                            <span > Apellidos:</span>
                                            <textbox id="apellidospa"  maxlength="60" cols="20" readonly="false"  />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> Ocupación:</span>
                                        <span>
                                            <textbox id="ocupacionpa" maxlength="100" cols="20"  readonly="false"    />
                                      
                                            <span > Profesión:</span>
                                            <textbox id="profesionpa" maxlength="100" cols="20"  readonly="false"    />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> Dirección:</span>
                                        <span>
                                            <textbox id="direccionpa" maxlength="100" cols="40"  readonly="false"    />
                                            <button label="..." onClick="direccionpa.value = direccion.value" />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> Teléfono:</span>
                                        <span>
                                            <textbox id="telefonopa" maxlength="100" cols="13"  readonly="false"  />
                                            <button label="..." onClick="telefonopa.value = telefono.value" />
                                            <span > Email:</span>
                                            <textbox id="emailpa" maxlength="100" cols="35"  readonly="false"    />
                                        </span>
                                    </row>
                                       
                                </rows>
                            </grid>
                                    
                        </panelchildren>
                    </panel>
                      
                    <panel collapsible="true"   framable="true"  title="DATOS DE LA MADRE" border="normal" >
                        <panelchildren>
                            <grid sclass="MyGridRowHeight">
                                <rows>
 
                                    <row>
                                        <span style="float:right"> Identificación:</span>
                                        <textbox maxlength="10" cols="13"  readonly="false" id="cedulama"  />
                                    </row>

                                    <row>
                           
                                        <span style="float:right"> Nombres:</span>
                                        <span>
                                            
                                            <textbox id="nombresma"  maxlength="60" cols="20" readonly="false"   />
                                            <span> Apellidos:</span>
                                            <textbox id="apellidosma"  maxlength="60" cols="20" readonly="false"  />
                                                
                                        </span>
                                    </row>

                                    <row>
                         
                                        <span style="float:right"> Ocupación:</span>
                                        <span>
                                            <textbox id="ocupacionma" maxlength="100" cols="20"  readonly="false"    />
                                            
                                            <span> Profesión:</span>
                                            <textbox id="profesionma" maxlength="100" cols="20"  readonly="false"    />
                                        </span>
                                    </row>
                                    <row>
                              
                                        <span style="float:right"> Dirección:</span>
                                        <span>
                                            <textbox id="direccionma" maxlength="100" cols="40"  readonly="false"    />
                                            <button label="..." onClick="direccionma.value = direccion.value" />
                                        </span>
                                    </row>
                                    <row>
                                
                                        <span style="float:right"> Teléfono:</span>
                                        <span>
                                            <textbox id="telefonoma" maxlength="50" cols="13"  readonly="false"  />
                                            <button label="..."  onClick="telefonoma.value = telefono.value" />
                                            <span > Email:</span>
                                            <textbox id="emailma" maxlength="100" cols="35"  readonly="false"    />
                                        </span>
                                    </row>
                                     

                                </rows>
                            </grid>

                        </panelchildren>
                    </panel>
                        
                    <panel collapsible="true"   framable="true"  title="DATOS DE REPRESENTANTE" border="normal" >
                        <panelchildren>
                            <grid sclass="MyGridRowHeight">
                                <rows>
                                    <row>
                                        <span style="float:right; color:blue" >COPIAR DE:  </span>
                                        <span>
                                       
                                     
                                            <button id="padrecr"  label="Padre" image="/images/padre.png"  onClick="copiarpr();"/>
                                            <button id="madrecr" label="Madre" image="/images/madre.png"     onClick="copiarmr();"/>
                                            <button id="limpiar" label="Nuevo"   onClick="limpiarRepresentante();"/>
                                        </span>
                                    </row>
                                     
                                    <row>
                                        <span style="float:right"> Identificación:</span>
                                        <textbox maxlength="13" cols="10"   readonly="false" id="cedulare"  />

                                    </row>
                                    <row>
                                        <span style="float:right;">
                                            <label value="Nombres(*)" style="font-weight: bold;"/>
                                        </span>
                                        <span >
                                            <textbox id="nombresre"  maxlength="60" cols="20" readonly="false"   />
                                     
                                            
                                            <label value="Apellidos(*)" style="font-weight: bold;"/>
                                            <textbox id="apellidosre"  maxlength="60" cols="20" readonly="false"  />
                                        </span>
                                            
                                    </row>
                                
                                    <row>
                                        <span style="float:right;">
                                            <label value="Dirección(*)" style="font-weight: bold;"/>
                                        </span>
                                        <span>
                                            <textbox id="direccionre" maxlength="100" cols="30"  readonly="false"    />
                                            <span > Teléfono:</span>
                                            <textbox id="telefonore" maxlength="100" cols="13"  readonly="false"  />
                                
                                        </span>
                                    </row>
                                        
                                    <row>
                                        <span style="float:right"> Email:</span>
                                        <textbox id="emailre" maxlength="100" cols="40"  readonly="false"    />
                                    </row>
                                    <row>
                                        <span  style="float:right">Parentesco</span>
                                        <span>
                                            <textbox id="parentesco" maxlength="100" cols="40"  readonly="false"    />
                                        </span>
                                    </row>
                                
                                    <row>

                                        <span style="float:right"> Usuario:</span>
                                        <span >
                                            <textbox id="usuarior"   maxlength="30" cols="15" readonly="false"  />
                                            Clave:
                                            <textbox id="claver"   maxlength="30" cols="15" readonly="false"  />
                                        </span>
                                        <span> </span>

                                        <span></span>
                                    </row>
                                
                                    
                                </rows>
                            </grid>
                        </panelchildren>
                    </panel>
                    <panel collapsible="true" framable="true"  title="FACTURAR A" border="normal" >
                        <panelchildren>
                            <grid sclass="MyGridRowHeight">
                                <rows>
                                    <row>
                                        <span style="color:blue;float:right" >COPIAR DE: </span>
                                        <span>
                                            <button id="padrec" label="Padre"  image="/images/padre.png"    onClick="copiarp();"/>
                                            <button id="madrec" label="Madre" image="/images/madre.png"      onClick="copiarm();"/>
                                            <button id="representantec" label="Representante"    onClick="copiarr();"/>
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> Tipo:</span>
                                        <span>
                                            <listbox mold="select" onSelect="llenarConsumidor();"   id="tipofac" width="150px">
                                                <listitem label="CEDULA" value="C">
                                                </listitem>
                                                <listitem label="RUC" value="R">
                                                </listitem>
                                                <listitem label="PASAPORTE" value="P">
                                                </listitem>
                                            </listbox>
                                         
                                            Identificación:
                                            <textbox maxlength="13" cols="13"  readonly="false" id="cedulafac"  />
                                        </span>
                                    </row>
                                    <row>
                                        <span style="float:right"> Nombre Factura:</span>
                                        <textbox id="nombresfac"  maxlength="100" cols="40" readonly="false"   />
                                    </row>
                                    <row>
                                        <span style="float:right"> Dirección:</span>
                                        <span>
                                            <textbox id="direccionfac" maxlength="100" cols="30"  readonly="false"    />
                                        
                                            <span> Teléfono:</span>
                                            <textbox id="telefonofac" maxlength="30" cols="13"  readonly="false"  /> 
                                        </span>
                                    </row>
                                       
                                </rows>
                            </grid>
                        </panelchildren>
                    </panel>
                         
                    <panel style="margin-bottom:10px" title="HERMANOS: " border="normal">
                        <panelchildren>            
                                         
                            <label></label>
                            <span >No. de Hermanos(*) </span>
                            <intbox id="hermanos"  />
                            Ingrese los hermanos en la institución
                                                           
                                          
                            <grid  width="100%" id="hermanos2">
                                <columns sizable="true">
                                    <column visible="false" label="codigo" />
                                    <column style="font-weight:bold" label="APELLIDOS Y NOMBRES" width="120px" />
                                    <column label="AÑO DE BÁSICA" width="50px"  />
                                </columns>
                                <rows>
                                    <row>
                                        <intbox id="codh1" value="0"/>
                                        <combobox  readonly="false"   cols="40" id="nomh1"   
                                                   onSelect='try{ codh1.value = (self.selectedItem.value).getCodigoest(); }catch(Exception e){ codh1.value=0; nomh1.value = "";}'  
                                                   autodrop="true" buttonVisible="false"  use="bean.AutoCompleteEstudiante"/>
                                        <textbox id="anioh1" value=""  readonly="false" />
                                    </row>
                                    <row>
                                        <intbox id="codh2" value="0"/>
                                        <combobox readonly="false"    cols="40" id="nomh2" onSelect="codh2.value = (self.selectedItem.value).getCodigoest()"   
                                                  autodrop="true" buttonVisible="false"  use="bean.AutoCompleteEstudiante"/>
                                        <textbox id="anioh2" value=""  readonly="false" />
                                    </row>
                                    <row>
                                        <intbox id="codh3" value="0"/>
                                        <combobox  readonly="false"   cols="40" id="nomh3"  onSelect="codh3.value = (self.selectedItem.value).getCodigoest()"  
                                                   autodrop="true" buttonVisible="false"  use="bean.AutoCompleteEstudiante"/>
                                        <textbox id="anioh3" value=""  readonly="false" />
                                    </row>
                                            
                                </rows>
                            </grid>
                        </panelchildren>
                    </panel>   
                                    
                    <panel style="margin-bottom:10px">
                        <panelchildren>
                            <vbox>
                                <hbox>
                                    <button id="btnguardar" image="/images/guardar.gif" orient="vertical" label="GUARDAR" height="65px" onClick='guardar();' />
                                </hbox>
                            </vbox>
                        </panelchildren>
                    </panel>         
                </portalchildren>
            </portallayout>
          




            <panel id="impresora" visible = "false" height="370px" style="margin-bottom:10px"
                   title="Reporte" border="normal">
                <panelchildren>
                    <jasperreport id="report" />
                </panelchildren>
            </panel>
            <zscript>
            <![CDATA[
                    llenar(ses.getAttribute("userEstudiante"));
                    //foto0.setContent(new org.zkoss.image.AImage("vacio", desktop.webApp.getResourceAsStream("/fotos/vacio.gif")));   
                    cursoactual.value = cursoActual+"";
            ]]>
            </zscript>
        </window>

    </div>
</zk>